.386p

PUBLIC PRINT_MESSAGE

DT_SEG SEGMENT PARA PUBLIC 'DATA' USE32

	MESSAGE DB	"32 Bits two objects portable executable file format!!"

DT_SEG ENDS

PM_SEG SEGMENT PARA PUBLIC 'CODE' USE32
	ASSUME CS:PM_SEG, DS:DT_SEG
	
	PRINT_MESSAGE PROC FAR
	
		XOR		EAX, EAX
		MOV		AX, DT_SEG
		SHL		EAX, 4
		ADD		EAX, OFFSET MESSAGE
		MOV		ESI, EAX
		
		MOV		EDI, 0B8C80h
		MOV		ECX, 53
		
	CPRINT_MESSAGE:
		LODSB
		MOV		AH, 00001111b
		STOSW
		LOOP	CPRINT_MESSAGE
	
		HLT
		DB      0EAh, 0h, 0h, 0h, 0h, 08h, 0h 	; RETURN
		
	PRINT_MESSAGE ENDP

PM_SEG ENDS

END PRINT_MESSAGE