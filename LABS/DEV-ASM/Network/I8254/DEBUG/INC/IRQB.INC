CODESEG16 SEGMENT USE16
	
	INT2Bh PROC
	
		PUSH	DS
		PUSH	ES

		MOV 	AX, SELVIDEODESC32
		MOV 	ES, AX
		MOV 	AX, SELDATADESC32
		MOV 	DS, AX
		
		ASSUME 	DS:SEGS32
		
		MOV		ESI, DWORD PTR I8254BASE
		ADD		ESI, I8254X_REG_ICR			; REGISTER INTERRUPT CAUSE READ
		
		MOV		EDI, 8
		MOV		AL, BYTE PTR INTPCI
		MOV		AH, 07h
		STOSW
		
		INC		INTPCI

		MOV 	AX, SELFULLDTDESC32			; DATA DESCRIPTOR START AT 0:0
		MOV 	DS, AX
		MOV		EAX, [ESI]					; READ ICR (CLEAN ICR)
		
		POP		ES
		POP		DS
		
		MOV 	AL, 20h						; INFORMA O FIM DA INSTRUCAO DE INTERRUPCAO
		OUT 	20h, AL              		; ACK IRQ
		OUT		0A0h, AL		

		IRETD
		
	INT2Bh ENDP
		
CODESEG16 ENDS