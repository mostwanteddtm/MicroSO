CODESEG16 SEGMENT USE16
	
	INT08h PROC

		; THIS IS CALLED DURING ANY EXCEPTION OR IRQ
		; WE WILL ASSUME IT IS ALWAYS IRQ#0 (TIMER)
		PUSH 	EAX
		PUSH 	ES
		PUSH 	DS
		MOV 	AX, SELVIDEODESC32
		MOV 	ES, AX
		MOV 	AX, SELDATADESC32
		MOV 	DS, AX
		
		ASSUME 	DS:SEGS32
		MOV 	AL, TIMER
		INC 	TIMER
		
		ASSUME 	DS:SEGS16
		MOV 	BYTE PTR ES:[0], AL
		MOV 	AL, 20H						; INFORMA O FIM DA INSTRUCAO DE INTERRUPCAO
		OUT 	20H, AL              		; ACK IRQ
		POP 	DS
		POP 	ES
		POP 	EAX
		IRETD
	
	INT08h ENDP
		
CODESEG16 ENDS