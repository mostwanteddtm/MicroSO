

;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2014 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3057-7374-2C			    |
; |	Zhou Tao, Jiangsu Australia Sinuo Network Technology Co., Ltd.	    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	B73E8AE8FBEAC1CFE29053B5C42C4E62
; Input	CRC32 :	ABAEFB3D

; File Name   :	D:\Desenvolvimento Kernel\OS for Dummies Loader\los4d\DEMO\STARTUPE.EXE
; Format      :	MS-DOS executable (EXE)
; Base Address:	1000h Range: 10000h-120A0h Loaded length: 1099h
; Entry	Point :	1000:0

		.286p
		.model large

; ===========================================================================

; Segment type:	Pure code
seg000		segment public 'CODE'
		assume cs:seg000
		assume es:nothing, ss:seg002, ds:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

		public start
start		proc near 
        
		mov	ax, seg	dseg
		mov	ds, ax
		assume ds:dseg
		mov	es, ax
		assume es:dseg
		mov	ax, cs
		call	sub_10037
		mov	ax, ds
		call	sub_10037
		mov	ax, es
		call	sub_10037
		mov	ax, ss
		call	sub_10037
		mov	ax, bp
		call	sub_10037
		mov	ax, sp
		call	sub_10037  
		mov	ax, si
		call	sub_10037
		mov	ax, di
		call	sub_10037
		mov	si, offset aHelloWorldIMAS ; "Hello World! I'm a simple EXE program.\"...
		cld
		mov	ah, 0Eh
		mov	bx, 7

loc_10029:				; ...
		lodsb
		or	al, al
		jz	short loc_10032
		int	10h		; - VIDEO - WRITE CHARACTER AND	ADVANCE	CURSOR (TTY WRITE)
					; AL = character, BH = display page (alpha modes)
					; BL = foreground color	(graphics modes)
		jmp	short loc_10029
; ---------------------------------------------------------------------------

loc_10032:				; ...

		mov ax, 4C00h
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT) 
		
		int 20h
start		endp			; AL = exit code


; =============== S U B	R O U T	I N E =======================================


sub_10037	proc near		; ...
		pusha
		mov	si, ax
		mov	cx, 4
		rol	si, cl

loc_1003F:				; ...
		mov	ax, si
		and	al, 0Fh
		mov	bx, 0
		xlat
		mov	ah, 0Eh
		mov	bx, 7
		int	10h		; - VIDEO - WRITE CHARACTER AND	ADVANCE	CURSOR (TTY WRITE)
					; AL = character, BH = display page (alpha modes)
					; BL = foreground color	(graphics modes)
		rol	si, 4
		loop	loc_1003F
		mov	al, 20h	; ' '
		int	10h		; - VIDEO -
		popa
		retn
sub_10037	endp

; ---------------------------------------------------------------------------
		align 8
seg000		ends

; ===========================================================================

; Segment type:	Pure data
dseg		segment	para public 'DATA'
		assume cs:dseg
a0123456789abcd	db '0123456789ABCDEF',0
		        ;db 4096 dup(0)
aHelloWorldIMAS	db 'CS DS ES SS BP SP SI DI LOAD.EXE',0 ; ...
		align 8
dseg		ends

; ===========================================================================

; Segment type:	Uninitialized
seg002		segment	byte stack 'STACK'
		assume cs:seg002
		assume es:nothing, ss:nothing, ds:dseg
		db 0FFFFh dup(?)
seg002		ends


		end start
