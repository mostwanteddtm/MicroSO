@ECHO OFF
ECHO ### INSTALADOR DO MICRO SO 1.01 - 16 BITS ###
@ECHO ON
FORMAT A: 
..\..\TOOLS\VC152\ML.EXE /AT /c ..\BOOT\FAT12.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD FAT12.OBJ, FAT12.BIN,,,,
IF "%PROCESSOR_ARCHITECTURE%" == "x86" (
	..\..\TOOLS\PTBIN\PARTCOPY.EXE FAT12.BIN 0 200 -f0
) ELSE (
	..\..\TOOLS\PTBIN\DD if=fat12.bin of=\\.\A: bs=512 count=1
)
..\..\TOOLS\VC152\ML.EXE /AT /c ..\KERNEL\KERNEL.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD KERNEL.OBJ, KERNEL.SYS,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\CMD\COMMAND.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD COMMAND.OBJ, COMMAND.COM,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\PROGRAMS\ASM\EDIT.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD EDIT.OBJ, EDIT.COM,,,,
..\..\TOOLS\VC152\ML.EXE /c ..\PROGRAMS\ASM\MODELO.ASM
..\..\TOOLS\VC152\LINK.EXE /NOD MODELO.OBJ, WORLD.EXE,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\PROGRAMS\ASM\LOADCOM.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD LOADCOM.OBJ, LOADCOM.COM,,,,
..\..\TOOLS\VC152\ML.EXE /c ..\PROGRAMS\ASM\LOADEXE.ASM
..\..\TOOLS\VC152\LINK.EXE /NOD LOADEXE.OBJ, LOADEXE.EXE,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\PROGRAMS\ASM\MEMVIEW.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD MEMVIEW.OBJ, MEMVIEW.COM,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\PROGRAMS\ASM\ATARI.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD ATARI.OBJ, ATARI.COM,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c ..\PROGRAMS\ASM\CHAT.ASM
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD CHAT.OBJ, CHAT.COM,,,,
..\..\TOOLS\VC152\ML.EXE /AT /c  ..\LIB\C0T.ASM ..\LIB\STDIO.ASM
..\..\TOOLS\VC152\ML.EXE /AT /c ..\MOUSE\PS2\PSMOUSE.ASM
..\..\TOOLS\VC152\ML.EXE /AT /c ..\MOUSE\SERIAL\MOUSE.ASM
..\..\TOOLS\VC152\ML.EXE /c ..\PROGRAMS\ASM\PE2OBJ\PEMAIN.ASM
..\..\TOOLS\VC152\ML.EXE /c ..\PROGRAMS\ASM\PE2OBJ\PEFUN.ASM
..\..\TOOLS\VC152\LINK.EXE /NOD PEMAIN.OBJ PEFUN.OBJ, PEMAIN.EXE,,,,
COPY ..\INCLUDE\STDIO.H STDIO.H
COPY ..\PROGRAMS\C\HELLO.C HELLO.C
..\..\TOOLS\VC152\CL.EXE /AT /G2 /Gs /Gx /c /Zl *.c
..\..\TOOLS\VC152\LIB.EXE STDIO.LIB +STDIO.OBJ,
..\..\TOOLS\VC152\LINK.EXE /TINY /NOD C0T.OBJ HELLO.OBJ STDIO.LIB, HELLO.COM,,,,
..\..\TOOLS\VC152\LINK.EXE /TINY PSMOUSE.OBJ, PSMOUSE.COM,,,,
..\..\TOOLS\VC152\LINK.EXE /TINY MOUSE.OBJ, MOUSE.COM,,,,
MOVE STDIO.LIB ..\LIB\STDIO.LIB
COPY KERNEL.SYS A:\
COPY COMMAND.COM A:\
COPY LOADCOM.COM A:\
COPY LOADEXE.EXE A:\
COPY MEMVIEW.COM A:\
COPY PSMOUSE.COM A:\
COPY ATARI.COM A:\
COPY WORLD.EXE A:\
COPY HELLO.COM A:\
COPY CHAT.COM A:\
COPY EDIT.COM A:\
COPY MOUSE.COM A:\
DEL *.OBJ *.MAP *.C *.H *.EXE *.COM *.BIN *.SYS
@ECHO OFF
ECHO -- INSTALACAO CONCLUIDA COM SUCESSO --
PAUSE